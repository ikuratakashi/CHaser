# GITの使い方のメモ
gitを本格的に使い始めて、まだよくわからないので、調べたことをここに記載します。

# 細かい使い方
- コミットのコメントの初期値設定
```sh
git config commit.template commit_temp.txt
```

- Emailとユーザ名の設定(全体に有効)
```sh
git config --global user.name "あなたの名前"
git config --global user.email "あなたのメールアドレス"
```

- Emailとユーザ名の設定(ローカルに有効)
```sh
git config --local user.name "あなたの名前"
git config --local user.email "あなたのメールアドレス"
```

- GITで管理しないファイルを設定する
`.gitgnore` ファイルを作成し、そこに記載された拡張子やフォルダ内がすべて同期されなくなる。

.gitgnore 例）
```
# 除外するフォルダ内を全て指定
## 
__pycache__/
```

これを行った後に、キャッシュからすでに存在する情報を削除するためのコマンド
```
git rm --cached *.log
git rm --cached *.pyc
```
実行が終わったらcommitをしてください

# コミットの履歴をすべて消したい場合
以下、ChatGPTの回答。この通りで出来た。
間違うとブランチがなくなる可能性がありそうなので、バックアップは取ってから実行してください。

コミットの履歴をすべて消して、現在の作業ディレクトリの状態を新しい最初のコミットとして保存するには、以下の手順を行います。この方法では、リポジトリの履歴を完全にリセットし、新たに開始することができます。

### 手順

1. **新しいブランチを作成する**: 現在の作業ディレクトリの状態を新しいブランチに保存します。

   ```bash
   git checkout --orphan new-branch
   ```

   `new-branch` は新しいブランチの名前です。必要に応じて変更できます。

2. **コミット履歴を削除する**: 現在の作業ディレクトリの状態を新しい最初のコミットとしてコミットします。

   ```bash
   git add .
   git commit -m "初期コミット"
   ```

   これで、現在の作業状態が新しいコミットとして保存されます。

3. **古いブランチを削除する**: 古いブランチを削除し、新しいブランチをリモートにプッシュします。

   ```bash
   git branch -D main
   git branch -m main
   git push --force origin main
   ```

   これで、リモートリポジトリの `main` ブランチが新しいコミットだけを持つようになります。

### 手順の詳細

1. **新しいブランチを作成する**:
   - `--orphan` オプションを使って、新しいブランチを作成します。これにより、履歴がない状態で新しいブランチが作成されます。
   ```bash
   git checkout --orphan new-branch
   ```

2. **作業内容をコミットする**:
   - すべてのファイルをステージングし、新しいコミットを作成します。
   ```bash
   git add .
   git commit -m "初期コミット"
   ```

3. **古いブランチを削除し、新しいブランチに名前を付ける**:
   - 現在の `main` ブランチを削除し、新しいブランチに `main` という名前を付けます。
   ```bash
   git branch -D main
   git branch -m main
   ```

4. **リモートリポジトリに強制プッシュする**:
   - 新しい状態をリモートに反映させるために、強制プッシュを行います。
   ```bash
   git push --force origin main
   ```

### 注意点
- **強制プッシュ**: `git push --force` コマンドを使用すると、リモートの履歴が上書きされます。他の開発者がこのリポジトリを使用している場合、影響を与える可能性があるため、慎重に実行してください。
- **履歴の完全な消去**: この手法では、リポジトリの履歴が完全に消去され、現在の作業ディレクトリの状態だけが残ります。履歴が必要な場合は、事前にバックアップを取ることをお勧めします。

